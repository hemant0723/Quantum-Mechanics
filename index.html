<!doctype html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
  <link rel="manifest" href="site.webmanifest">
  <title>Quantum Mechanics (I) â€” Course Site</title>
  <meta name="description" content="Official course site for Quantum Mechanics (I) (TIGP). Syllabus, attendance, assignments, homework, books, and contacts." />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <a href="#info" class="skip-link">Skip to content</a>
  <header class="hero">
    <div class="hero-inner">
      <div class="brand">
        <span class="logo">QM</span>
        <div class="titles">
          <h1 id="course-title">Quantum Mechanics (I)</h1>
          <p id="course-subtitle">Phys8067 â€¢ 114-1</p>
        </div>
      </div>
      <div class="header-actions">
        <button id="theme-toggle" class="theme-toggle" title="Toggle theme" aria-label="Switch theme" aria-pressed="false">ðŸŒ™</button>
      </div>
    </div>
    <nav class="tabs" role="tablist" aria-label="Sections">
      <a class="tab active" role="tab" href="#info" aria-selected="true">Course Info</a>
      <a class="tab" role="tab" href="#syllabus" aria-selected="false">Syllabus</a>
      <a class="tab" role="tab" href="#attendance" aria-selected="false">Attendance</a>
      
      <a class="tab" role="tab" href="#homework" aria-selected="false">Homework</a>
      <a class="tab" role="tab" href="#notes" aria-selected="false">Notes</a>
      <a class="tab" role="tab" href="#books" aria-selected="false">Books</a>
      <a class="tab" role="tab" href="#contacts" aria-selected="false">Contacts</a>
      <a class="tab" id="admin-tab" style="display:none" role="tab" href="#admin" aria-selected="false">Admin</a>
    </nav>
  </header>

  <main>
    <!-- Student selector (always visible) -->
    <section class="selector card">
      <label for="student-select">Select your name:</label>
      <select id="student-select" aria-label="Select student"></select>
      <button id="copy-link" title="Copy personal link">Copy personal link</button>
      <small class="muted">Share the copied link so students open their view directly.</small>
    </section>

    <!-- INFO -->
    <section id="info" class="panel active">
      <div class="grid two">
        <div class="card">
          <h2>Overview</h2>
          <p id="course-desc"></p>
          <h3>Goals</h3>
          <p id="course-goals"></p>
          <h3>Prerequisites</h3>
          <p id="course-prereq"></p>
        </div>
        <div class="card">
          <h2>Logistics</h2>
          <table class="kv">
            <tbody id="info-table">
              <!-- populated by JS -->
            </tbody>
          </table>
          <h3>Evaluation</h3>
          <ul id="eval-list"></ul>
          <h3>Office Hours</h3>
          <p id="office-hours"></p>
          <h3>Policies</h3>
          <ul id="policy-list"></ul>
        </div>
      </div>
      <div class="card">
        <h2>News</h2>
        <ul style="color: var(--danger); margin: 0 0 .25rem 1rem;">
          <li>30 Oct will have mid-term exam. The exam will be open book and no AI/mobile phone can be used.</li>
        </ul>
      </div>
      <div class="card">
        <h2>Students</h2>
        <div class="actions">
          <input type="search" id="roster-search" placeholder="Search ID, name, deptâ€¦" aria-label="Search students" />
          <select id="roster-program" aria-label="Filter by program">
            <option value="">All programs</option>
          </select>
        </div>
        <table class="table" id="roster-table">
          <thead>
            <tr>
              <th>ID</th><th>Name</th><th>Dept</th><th>Program</th><th>Email</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- SYLLABUS -->
    <section id="syllabus" class="panel">
      <h2>Syllabus & Weekly Topics</h2>
      <table class="table" id="syllabus-table">
        <thead><tr><th>Week</th><th>Date</th><th>Topic</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ATTENDANCE -->
    <section id="attendance" class="panel">
      <h2>Attendance</h2>
      <div class="filters row-wrap">
        <input type="month" id="att-month" />
        <button id="att-clear-filter">Clear</button>
      </div>
      <table class="table" id="att-table">
        <thead><tr><th>Date</th><th>Status</th><th>Notes</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    

    <!-- HOMEWORK -->
    <section id="homework" class="panel">
      <h2>Homework</h2>
      <div id="hw-accordion" class="accordion"></div>
      <h3 style="margin-top:1rem">Marks</h3>
      <table class="table" id="assn-table">
        <thead>
          <tr>
            <th>Assignment</th>
            <th>Marks</th>
            <th>Max</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- NOTES -->
    <section id="notes" class="panel">
      <h2>Notes</h2>
      <div id="notes-accordion" class="accordion"></div>
    </section>

    <!-- BOOKS -->
    <section id="books" class="panel">
      <h2>Books & References</h2>
      <div class="actions">
        <input type="search" id="book-search" placeholder="Searchâ€¦" />
      </div>
      <table class="table" id="books-table">
        <thead><tr><th>Title</th><th>Author(s)</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- CONTACTS -->
    <section id="contacts" class="panel">
      <h2>Contacts</h2>
      <div id="contacts-box" class="cards"></div>
    </section>

    

    <!-- ADMIN -->
    <section id="admin" class="panel">
      <h2>Admin</h2>
      <div class="actions">
        <button id="adm-logout">Logout</button>
      </div>
      <div class="card">
        <h3>Attendance Editor</h3>
        <div class="row-wrap">
          <input type="date" id="adm-att-date" aria-label="Attendance date" />
          <button id="adm-att-all">Mark all</button>
          <button id="adm-att-save">Save attendance</button>
        </div>
        <div id="adm-att-list" class="cards" style="gap:.4rem"></div>
        <small class="muted">Saves to this browser only (no server). You can export/import below.</small>
      </div>
      <div class="card">
        <h3>Homework Editor</h3>
        <div class="row-wrap">
          <input type="text" id="adm-hw-title" placeholder="Title" aria-label="Homework title" />
          <input type="date" id="adm-hw-due" aria-label="Due date" />
          <input type="number" id="adm-hw-points" placeholder="Points" aria-label="Points" />
          <input type="url" id="adm-hw-link" placeholder="Link (optional)" aria-label="Link" />
        </div>
        <textarea id="adm-hw-desc" rows="3" placeholder="Description" style="width:100%"></textarea>
        <div class="row-wrap">
          <button id="adm-hw-add">Add homework</button>
        </div>
        <div id="adm-hw-list" class="cards"></div>
      </div>
      <div class="card">
        <h3>Backup / Restore</h3>
        <div class="row-wrap">
          <button id="adm-export">Copy overrides JSON</button>
          <button id="adm-clear">Clear overrides</button>
        </div>
        <textarea id="adm-import-text" rows="6" placeholder="Paste overrides JSON hereâ€¦" style="width:100%"></textarea>
        <div class="row-wrap">
          <button id="adm-import">Import</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="col">
        <h4 class="footer-title" id="footer-course">Course</h4>
        <ul class="footer-list">
          <li id="footer-numbers">â€”</li>
          <li id="footer-time">â€”</li>
          <li id="footer-location">â€”</li>
        </ul>
      </div>
      <div class="col">
        <h4 class="footer-title">Contacts</h4>
        <ul class="footer-list">
          <li>Instructor: <span id="footer-instructor">â€”</span></li>
          <li>TA: <span id="footer-ta">â€”</span></li>
          <li id="footer-institute">â€”</li>
        </ul>
      </div>
      <div class="col">
        <h4 class="footer-title">Links</h4>
        <ul class="footer-list">
          <li><a href="#info">Course Info</a></li>
          <li><a href="#syllabus">Syllabus</a></li>
          
          <li><a href="#notes">Notes</a></li>
          <li><a href="#contacts">Contacts</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <small>Â© <span id="footer-year"></span> <span id="footer-course-short">Quantum Mechanics (I)</span> â€¢ TIGP</small>
    </div>
  </footer>

  <!-- Preload critical resources -->
  <link rel="preload" href="assets/css/styles.css" as="style">
  <link rel="preload" href="data/data.js" as="script">
  <link rel="preload" href="assets/js/app.new.js" as="script">
  
  <!-- Load data and initialize app -->
  <script src="data/data.js" defer></script>
  <script src="assets/js/app.new.js" defer></script>
  
  <!-- Fallback for older browsers -->
  <script>
    // Add no-js class for progressive enhancement
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
    
    // Load polyfills if needed
    if (!('Promise' in window)) {
      document.write('<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"><\/script>');
    }
    
    // Load app after polyfills
    window.addEventListener('load', function() {
      // Initialize app if not already done
      if (window.appInitialized) return;
      const script = document.createElement('script');
      script.src = 'assets/js/app.new.js';
      document.body.appendChild(script);
    });
  </script>
</body>
</html>
